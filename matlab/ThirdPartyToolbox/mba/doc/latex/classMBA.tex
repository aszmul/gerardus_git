\section{MBA Class Reference}
\label{classMBA}\index{MBA@{MBA}}


{\bfseries Main} {\bfseries interaface} {\bfseries for} {\bfseries multilevel} {\bfseries B-\/spline} {\bfseries approximation}  




{\ttfamily \#include $<$MBA.h$>$}

\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
{\bf MBA} (boost::shared\_\-ptr$<$ {\bf dVec} $>$ U, boost::shared\_\-ptr$<$ {\bf dVec} $>$ V, boost::shared\_\-ptr$<$ {\bf dVec} $>$ Z)
\item 
void {\bf init} (boost::shared\_\-ptr$<$ {\bf dVec} $>$ U, boost::shared\_\-ptr$<$ {\bf dVec} $>$ V, boost::shared\_\-ptr$<$ {\bf dVec} $>$ Z)
\item 
void {\bf init} ({\bf UCBspl::SplineSurface} \&surf)
\item 
void {\bf setDomain} (double umin, double vmin, double umax, double vmax)
\item 
void {\bf setBaseType} ({\bf MBAbaseType} baseType)
\item 
void {\bf setBaseValue} (double base)\label{classMBA_ae4fac78fc765d9769f1a6e2b2f809928}

\begin{DoxyCompactList}\small\item\em Level of the base surface if MBA\_\-CONSTVAL is used as base type. \item\end{DoxyCompactList}\item 
void {\bf MBAalg} (int m0, int n0, int h=0, int smoothing\_\-steps=0)
\item 
const {\bf MBAdata} \& {\bf getData} () const \label{classMBA_aad9d3b4412a39d777c7c61a9ce038692}

\begin{DoxyCompactList}\small\item\em Get the data object (See class \doxyref{MBAdata}{p.}{classMBAdata}). \item\end{DoxyCompactList}\item 
void {\bf readScatteredData} (char filename[$\,$])\label{classMBA_a14835cfb5ca20151ab813c0b591538a7}

\begin{DoxyCompactList}\small\item\em Read scattered data from file in the format u v z on each line. \item\end{DoxyCompactList}\item 
void {\bf smoothZeros} (int no\_\-iter)\label{classMBA_a231f97ac087e086f38ef412237a89c64}

\begin{DoxyCompactList}\small\item\em Smooth the spline surface without affecting the approximation accuracy. \item\end{DoxyCompactList}\item 
{\bf UCBspl::SplineSurface} {\bf getSplineSurface} () const 
\item 
void {\bf getIndexDomain} (int \&m, int \&n) const 
\item 
void {\bf cleanup} (int type=0)
\item 
boost::shared\_\-ptr$<$ {\bf GenMatrixType} $>$ {\bf PHI} () const 
\item 
void {\bfseries checkSparsity} () const \label{classMBA_ae6d0a43c2c9bbeb216e9d1b5b84f9d7e}

\item 
void {\bfseries checkError} () const \label{classMBA_aaca32043810eed8914055350d59e62b8}

\end{DoxyCompactItemize}
\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static void {\bfseries smoothMatrix} ({\bf GenMatrixType} \&matrix, int no\_\-iter)\label{classMBA_a1cbb51857f5781ee103e9f64a3b0beb3}

\end{DoxyCompactItemize}


\subsection{Detailed Description}
{\bfseries Main} {\bfseries interaface} {\bfseries for} {\bfseries multilevel} {\bfseries B-\/spline} {\bfseries approximation} \doxyref{MBA}{p.}{classMBA} -\/ Multilevel B-\/spline approximation (and interpolation). This is the main interface to multilevel B-\/spline approximation of scattered data for functional surfaces. The method is based on B-\/spline refinement and produces one single B-\/spline surface, as opposed to MBAadaptive that produces a hierarchy of spline surfaces. The domain of the surface will be the rectangular domain of the given scattered data in the (x,y)-\/axes directions as default. (We use {\itshape u\/} and {\itshape v\/} for {\itshape x\/} and {\itshape y\/} in function headers) The function \doxyref{MBA::MBAalg}{p.}{classMBA_a6b914419b76205172a38fd5db69fbe02} produces the spline surface from the scattered data. The spline surface can be retrieved as a SplineSurface object with \doxyref{MBA::getSplineSurface}{p.}{classMBA_aa00a2df4494bf0f9661e627c32d3c610}. Note that this is a (mathematical) lower level interface; thus there is no check for the validity of given scattered data or of arguments passed to member functions.

\label{classMBA_mba_example1}
 Examle of use (minimal): 
\begin{DoxyCode}
   MBA mba(x_arr, y_arr, z_arr);      // initialize with scattered data
   mba.MBAalg(1,1,7);                 // create spline surface

   UCBspl::SplineSurface surf = mba.getSplineSurface();
   double z = surf.f(x,y);            // evaluate (height of) surface in (x,y)
   surf.normalVector(x,y, nx,ny,nz);  // evaluate normal vector in (x,y)
\end{DoxyCode}
 

\subsection{Constructor \& Destructor Documentation}
\index{MBA@{MBA}!MBA@{MBA}}
\index{MBA@{MBA}!MBA@{MBA}}
\subsubsection[{MBA}]{\setlength{\rightskip}{0pt plus 5cm}MBA::MBA (
\begin{DoxyParamCaption}
\item[{boost::shared\_\-ptr$<$ {\bf dVec} $>$}]{ U, }
\item[{boost::shared\_\-ptr$<$ {\bf dVec} $>$}]{ V, }
\item[{boost::shared\_\-ptr$<$ {\bf dVec} $>$}]{ Z}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [inline]}}\label{classMBA_a75688e10886ac2b38f3f1b3d50de3149}
Constructor with (standard) shared pointers to scattered data 

References MBAdata::init().



\subsection{Member Function Documentation}
\index{MBA@{MBA}!cleanup@{cleanup}}
\index{cleanup@{cleanup}!MBA@{MBA}}
\subsubsection[{cleanup}]{\setlength{\rightskip}{0pt plus 5cm}void MBA::cleanup (
\begin{DoxyParamCaption}
\item[{int}]{ type = {\ttfamily 0}}
\end{DoxyParamCaption}
)}\label{classMBA_a900acd4284bebb50f2339a025d1ba9aa}
Clean-\/up array structures and reduce memory usage. Depending on the given {\itshape type\/} described below, temporary array structures will be deleted. All options preserve information necessary to evaluate the surface. 
\begin{DoxyParams}{Parameters}
\item[{\em 0,:}]Temporary (mathematical) stuff not used further after \doxyref{MBA::MBAalg}{p.}{classMBA_a6b914419b76205172a38fd5db69fbe02}. \item[{\em 1,:}]The scattered data arrays and data derived from them. \item[{\em 2,:}]Everything, including that above, that is not needed by evaluators. \end{DoxyParams}
\index{MBA@{MBA}!getIndexDomain@{getIndexDomain}}
\index{getIndexDomain@{getIndexDomain}!MBA@{MBA}}
\subsubsection[{getIndexDomain}]{\setlength{\rightskip}{0pt plus 5cm}void MBA::getIndexDomain (
\begin{DoxyParamCaption}
\item[{int \&}]{ m, }
\item[{int \&}]{ n}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily  [inline]}}\label{classMBA_af0ea4f039dfe090b419b6d92cca9c282}
Index domain of spline coefficient matrix. The surface can also be evaluated by f(i,j) and other functions with 0 $<$= i $<$= m and 0 $<$= j $<$= n. Note that the size of the tensor product grid (in the C2 case) is (m+3) x (n+3) \index{MBA@{MBA}!getSplineSurface@{getSplineSurface}}
\index{getSplineSurface@{getSplineSurface}!MBA@{MBA}}
\subsubsection[{getSplineSurface}]{\setlength{\rightskip}{0pt plus 5cm}{\bf UCBspl::SplineSurface} MBA::getSplineSurface (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily  [inline]}}\label{classMBA_aa00a2df4494bf0f9661e627c32d3c610}
Retrieve the spline surface. 

References MBAdata::umax(), MBAdata::umin(), MBAdata::vmax(), and MBAdata::vmin().

\index{MBA@{MBA}!init@{init}}
\index{init@{init}!MBA@{MBA}}
\subsubsection[{init}]{\setlength{\rightskip}{0pt plus 5cm}void MBA::init (
\begin{DoxyParamCaption}
\item[{{\bf UCBspl::SplineSurface} \&}]{ surf}
\end{DoxyParamCaption}
)}\label{classMBA_a0b1289314a4bd8859ab0002754c492c9}
Initialization of surface using data retrieved by \doxyref{getSplineSurface()}{p.}{classMBA_aa00a2df4494bf0f9661e627c32d3c610} 

References UCBspl::SplineSurface::getCoefficients().

\index{MBA@{MBA}!init@{init}}
\index{init@{init}!MBA@{MBA}}
\subsubsection[{init}]{\setlength{\rightskip}{0pt plus 5cm}void MBA::init (
\begin{DoxyParamCaption}
\item[{boost::shared\_\-ptr$<$ {\bf dVec} $>$}]{ U, }
\item[{boost::shared\_\-ptr$<$ {\bf dVec} $>$}]{ V, }
\item[{boost::shared\_\-ptr$<$ {\bf dVec} $>$}]{ Z}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [inline]}}\label{classMBA_a5b562c9adc3e15043059de5b0e76aa90}
Initialization that takes reference to arrays of scattered data. Note: see documenation of corresponding constructor above. 

References MBAdata::init().

\index{MBA@{MBA}!MBAalg@{MBAalg}}
\index{MBAalg@{MBAalg}!MBA@{MBA}}
\subsubsection[{MBAalg}]{\setlength{\rightskip}{0pt plus 5cm}void MBA::MBAalg (
\begin{DoxyParamCaption}
\item[{int}]{ m0, }
\item[{int}]{ n0, }
\item[{int}]{ h = {\ttfamily 0}, }
\item[{int}]{ smoothing\_\-steps = {\ttfamily 0}}
\end{DoxyParamCaption}
)}\label{classMBA_a6b914419b76205172a38fd5db69fbe02}
Create a B-\/spline approximation to the scattered data.


\begin{DoxyParams}{Parameters}
\item[{\em m0,n0}]($>$=1): The initial size of the spline space in the hierarchical construction. If the rectangular domain is a square, m0=n0=1 is recommended. If the rectangular domain in the y-\/direction is twice of that the x-\/direction, m0=1, n0=2 is recommended. In general, if the rectangular domain in the y-\/direction is k times the length in the x-\/direction, m0=1, n0=k is recommended.\item[{\em h,:}]Number of levels in the hierarchical construction. If, e.g., m0=n0=1 and h=8, The resulting spline surface has a coefficient grid of size 2$^\wedge$h + 3 = 259 in each direction if a cubic C$^\wedge$2 spline surface is created. (Currently a compile option {\ttfamily UNIFORM\_\-CUBIC\_\-C1\_\-SPLINES} can be set in {\ttfamily MBAunifBsplines.h} to create a cubic C$^\wedge$1 surface. In this case the coefficient grid will be approx. twice the size of that in the C$^\wedge$2 case when using the same h value.) \end{DoxyParams}


References MBAdata::size(), smoothZeros(), and MBAdata::umin().

\index{MBA@{MBA}!PHI@{PHI}}
\index{PHI@{PHI}!MBA@{MBA}}
\subsubsection[{PHI}]{\setlength{\rightskip}{0pt plus 5cm}boost::shared\_\-ptr$<${\bf GenMatrixType}$>$ MBA::PHI (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily  [inline]}}\label{classMBA_a6612ebec42a9765180aea330e66a6015}
Get the coefficient grid of the tensor product spline surface. \index{MBA@{MBA}!setBaseType@{setBaseType}}
\index{setBaseType@{setBaseType}!MBA@{MBA}}
\subsubsection[{setBaseType}]{\setlength{\rightskip}{0pt plus 5cm}void MBA::setBaseType (
\begin{DoxyParamCaption}
\item[{{\bf MBAbaseType}}]{ baseType}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [inline]}}\label{classMBA_aa2e0f2de4764dc3f7ccdd7e7b4fd4a11}
Set surface base. Since the multilevel spline method is not affine-\/invariant, it is recommended to set a base surface over which the approximation is created. 
\begin{DoxyParams}{Parameters}
\item[{\em MBA\_\-ZERO,:}]A planar surface at level zero. \item[{\em MBA\_\-CONSTLS,:}]A konstant (least square) surface at the level of the mean z-\/value (default and recommended). \item[{\em MBA\_\-CONSTVAL,:}]A konstant surface at the level as given by setBaseValue. \end{DoxyParams}
\index{MBA@{MBA}!setDomain@{setDomain}}
\index{setDomain@{setDomain}!MBA@{MBA}}
\subsubsection[{setDomain}]{\setlength{\rightskip}{0pt plus 5cm}void MBA::setDomain (
\begin{DoxyParamCaption}
\item[{double}]{ umin, }
\item[{double}]{ vmin, }
\item[{double}]{ umax, }
\item[{double}]{ vmax}
\end{DoxyParamCaption}
)\hspace{0.3cm}{\ttfamily  [inline]}}\label{classMBA_a50708f2588e3c31a24f2d44aae577f62}
Set the domain over which the surface is defined. The default is the xy-\/range of the scattered data.

\begin{DoxyNote}{Note}
This function can only be used to expand the domain boyond the xy-\/range of the scattered data. It is the users responsibility to check that no scattered data falls outside the domain. (use std::min\_\-element and std::max\_\-element to find range of data for std::vector) 
\end{DoxyNote}


The documentation for this class was generated from the following files:\begin{DoxyCompactItemize}
\item 
MBA.h\item 
MBA.cpp\end{DoxyCompactItemize}
